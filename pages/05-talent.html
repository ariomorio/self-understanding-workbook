<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‰èƒ½ãƒ¯ãƒ¼ã‚¯ | ãƒã‚¤ã‚³ãƒ³ãƒ‘ã‚¹</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .talent-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap: 8px;
      max-height: 350px;
      overflow-y: auto;
      padding: var(--spacing-sm);
      background: var(--gray-light);
      border-radius: var(--radius-sm);
    }
    .talent-tag {
      padding: 8px 10px;
      background: var(--white);
      border: 2px solid #e0e0e0;
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }
    .talent-tag:hover { border-color: var(--primary-orange); }
    .talent-tag.selected {
      background: var(--primary-orange);
      border-color: var(--primary-orange);
      color: var(--white);
    }
    .category-title {
      background: var(--light-orange);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
      font-weight: bold;
      margin: var(--spacing-md) 0 var(--spacing-sm);
      color: var(--primary-brown);
      font-size: 0.9rem;
    }
    .selected-talents {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      min-height: 50px;
      padding: var(--spacing-sm);
      background: var(--light-yellow);
      border-radius: var(--radius-sm);
      margin-top: var(--spacing-sm);
    }
    .selected-talent {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 6px 12px;
      background: var(--primary-orange);
      color: var(--white);
      border-radius: 20px;
      font-size: 0.9rem;
    }
    .selected-talent .remove { cursor: pointer; opacity: 0.8; }
    .feedback-list { display: flex; flex-direction: column; gap: var(--spacing-sm); }
    .feedback-item { display: flex; align-items: center; gap: var(--spacing-sm); }
    .feedback-item .label {
      width: 30px; height: 30px;
      background: var(--primary-orange);
      color: var(--white);
      border-radius: var(--radius-full);
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; flex-shrink: 0;
    }
    .feedback-item input {
      flex: 1;
      padding: var(--spacing-sm);
      border: 2px solid #e0e0e0;
      border-radius: var(--radius-sm);
      font-size: 1rem;
    }
    .feedback-item input:focus { outline: none; border-color: var(--primary-orange); }
  </style>
</head>
<body>
  <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

  <header class="page-header">
    <h1><span class="icon">âœ¨</span> è‡ªå·±ç†è§£ãƒ¯ãƒ¼ã‚¯â‘¡ï¼šæ‰èƒ½</h1>
  </header>

  <div class="container">
    <div class="video-section">
      <h3>ğŸ“º è§£èª¬å‹•ç”»</h3>
      <div class="video-embed">
        <iframe src="https://drive.google.com/file/d/1Mv5gujTT9NjigInWLMBrHHoVuOIYih0m/preview" allow="autoplay" allowfullscreen></iframe>
      </div>
      <div class="video-fallback">
        <a href="https://drive.google.com/file/d/1Mv5gujTT9NjigInWLMBrHHoVuOIYih0m/view" target="_blank">å‹•ç”»ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã“ã¡ã‚‰</a>
      </div>
    </div>

    <!-- æ‰èƒ½ã¨ã¯ -->
    <div class="section">
      <h2 class="section-title">æ‰èƒ½ã®æ­£ä½“ã‚’çŸ¥ã‚‹</h2>
      <div style="background: var(--light-yellow); padding: var(--spacing-md); border-radius: var(--radius-sm);">
        <p><strong>ğŸ” æ‰èƒ½ã¨ã¯ï¼Ÿ</strong></p>
        <p>ã€Œæ‰èƒ½ï¼äººã‚ˆã‚Šè‡ªç„¶ã«ã§ãã¦ã—ã¾ã†"ç„¡æ„è­˜ã®å¼·ã¿"ã€ã®ã“ã¨ã€‚</p>
        <p style="margin-top: var(--spacing-sm);">åŠªåŠ›ã—ã¦ãªã„ã®ã«æˆæœãŒå‡ºãŸã‚Šã€æ„Ÿè¬ã•ã‚ŒãŸã‚Šã€é ¼ã¾ã‚ŒãŸã‚Šã™ã‚‹ã“ã¨ãŒãã®ã‚µã‚¤ãƒ³ã€‚<br>ã€Œè‡ªåˆ†ã§ã¯æ™®é€šã€ã€Œä½•ã‚‚ã—ã¦ãªã„ã€ã¨æ€ã£ã¦ã‚‹ã“ã¨ãŒã€å®Ÿã¯ã‚ãªãŸã®æ‰èƒ½ã‹ã‚‚ã—ã‚Œãªã„ã‚“ã§ã™ã€‚</p>
      </div>
    </div>

    <!-- Q1 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q1</span>ã“ã‚Œã¾ã§äººã«æ„Ÿè¬ã•ã‚ŒãŸä½“é¨“ã‚’3ã¤ä»¥ä¸Šæ›¸ãå‡ºã—ã¦ã¿ã‚ˆã†</div>
        <div class="question-hint">ã€Œã‚ã‚ŠãŒã¨ã†ã€ã®è£å´ã«æ‰èƒ½ãŒçœ ã£ã¦ã„ã‚‹ï¼</div>
        <div class="question-example">å‹é”ã®ç›¸è«‡ã«ã®ã£ã¦æ„Ÿè¬ã•ã‚ŒãŸ</div>
        <textarea id="q1" placeholder="æ„Ÿè¬ã•ã‚ŒãŸä½“é¨“ã‚’æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†..."></textarea>
      </div>
    </div>

    <!-- Q2 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q2</span>äººã‹ã‚‰ã€Œãªã‚“ã§ãã‚“ãªã«ã§ãã‚‹ã®!?ã€ã¨é©šã‹ã‚ŒãŸã“ã¨ã¯ï¼Ÿ</div>
        <div class="question-hint">è‡ªåˆ†ã«ã¨ã£ã¦ã¯"æ™®é€š"ã€‚ã§ã‚‚äººã‹ã‚‰ã™ã‚‹ã¨"æ‰èƒ½"ã‹ã‚‚ã—ã‚Œãªã„ã€‚</div>
        <div class="question-example">ç‡å…ˆã—ã¦ã‚ªãƒ•ä¼šã®ä¼ç”»ã‚’ã™ã‚‹</div>
        <textarea id="q2" placeholder="é©šã‹ã‚ŒãŸã“ã¨ã‚’æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†..."></textarea>
      </div>
    </div>

    <!-- Q3 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q3</span>ã‚ãªãŸãŒã€Œã¤ã„æ‰‹ã‚’å‡ºã—ã¡ã‚ƒã†ã“ã¨ã€ã£ã¦ä½•ï¼Ÿ</div>
        <div class="question-hint">ç„¡æ„è­˜ã§ã‚„ã£ã¦ã—ã¾ã†ï¼æ‰èƒ½ã®ç¨®ã€‚é ¼ã¾ã‚Œã¦ã‚‚ãªã„ã®ã«è‡ªç„¶ã¨ã‚„ã£ã¦ã—ã¾ã†è¡Œå‹•ã‚’æ¢ã‚‹</div>
        <div class="question-example">è³‡æ–™ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’æ•´ãˆãŸããªã‚‹</div>
        <textarea id="q3" placeholder="ã¤ã„æ‰‹ã‚’å‡ºã—ã¦ã—ã¾ã†ã“ã¨ã¯..."></textarea>
      </div>
    </div>

    <!-- Q4 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q4</span>ã€Œæ™‚é–“ã‚’å¿˜ã‚Œã‚‹ã»ã©å¤¢ä¸­ã«ãªã‚Œã‚‹ã“ã¨ã€ã¯ä½•ï¼Ÿ</div>
        <div class="question-hint">å¤¢ä¸­ï¼æ‰èƒ½ãŒè‡ªç„¶ã«æµã‚Œã¦ã„ã‚‹æ™‚é–“</div>
        <div class="question-example">ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ã„ã˜ã£ã¦ãŸã‚‰æ°—ã¥ã„ãŸã‚‰3æ™‚é–“</div>
        <textarea id="q4" placeholder="å¤¢ä¸­ã«ãªã‚Œã‚‹ã“ã¨ã¯..."></textarea>
      </div>
    </div>

    <!-- Q5 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q5</span>ã€Œè¤’ã‚ã‚‰ã‚Œã¦ã‚‚ãƒ”ãƒ³ã¨ã“ãªã„ã“ã¨ã€ã¯ä½•ï¼Ÿ</div>
        <div class="question-hint">æ‰èƒ½ã‚ã‚‹äººã¯ã€Œã„ã‚„ã€æ™®é€šãªã‚“ã ã‘ã©â€¦ã€ã¨æ€ã„ãŒã¡ã€‚ãã‚Œã€ã¾ã•ã«æ‰èƒ½ã‹ã‚‚ï¼</div>
        <div class="question-example">ã€Œèª¬æ˜ãŒã‚ã‹ã‚Šã‚„ã™ã„ã­ï¼ã€ã¨ã‚ˆãè¨€ã‚ã‚Œã‚‹</div>
        <textarea id="q5" placeholder="è¤’ã‚ã‚‰ã‚Œã¦ã‚‚ãƒ”ãƒ³ã¨ã“ãªã„ã“ã¨ã¯..."></textarea>
      </div>
    </div>

    <!-- Q6 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q6</span>èº«ã®å›ã‚Šã«ã„ã‚‹5äººä»¥ä¸Šã‹ã‚‰ã€ã‚ãªãŸã®å¼·ã¿ã€å¾—æ„ãã†ãªã“ã¨ã€‘ã‚’èã„ã¦ã¿ã‚ˆã†</div>
        <div class="question-hint">è‡ªå·±è©•ä¾¡ã ã‘ã§ãªãã€ä»–è€…ã®å°è±¡ã«ã‚‚æ‰èƒ½ã®ãƒ’ãƒ³ãƒˆãŒéš ã‚Œã¦ã‚‹ï¼</div>
        <p style="font-size: 0.9rem; color: var(--text-light); margin-bottom: var(--spacing-sm);">
          å®¶æ—ã€å‹é”ã€è·å ´ã®äººã€ç™ºä¿¡è€…ä»²é–“ãªã© ã„ã‚ã‚“ãªã‚¸ãƒ£ãƒ³ãƒ«ã®äººã‹ã‚‰èã„ã¦ãã ã•ã„
        </p>
        <div class="feedback-list">
          <div class="feedback-item"><div class="label">1</div><input type="text" id="q6-1" placeholder="ä¾‹ï¼‰å‹é”â†’ã™ãã«è¡Œå‹•ã™ã‚‹ã¨ã“ã‚"></div>
          <div class="feedback-item"><div class="label">2</div><input type="text" id="q6-2" placeholder="èª°ã‹ã‚‰ï¼Ÿâ†’ä½•ã¨è¨€ã‚ã‚ŒãŸï¼Ÿ"></div>
          <div class="feedback-item"><div class="label">3</div><input type="text" id="q6-3" placeholder="èª°ã‹ã‚‰ï¼Ÿâ†’ä½•ã¨è¨€ã‚ã‚ŒãŸï¼Ÿ"></div>
          <div class="feedback-item"><div class="label">4</div><input type="text" id="q6-4" placeholder="èª°ã‹ã‚‰ï¼Ÿâ†’ä½•ã¨è¨€ã‚ã‚ŒãŸï¼Ÿ"></div>
          <div class="feedback-item"><div class="label">5</div><input type="text" id="q6-5" placeholder="èª°ã‹ã‚‰ï¼Ÿâ†’ä½•ã¨è¨€ã‚ã‚ŒãŸï¼Ÿ"></div>
        </div>
      </div>
    </div>

    <!-- Q7 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q7</span>Q1ã€œ6ã‚’è¦‹è¿”ã—ã¦ã€ã©ã‚“ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆæ‰èƒ½ï¼‰ãŒå…±é€šã—ã¦ã¾ã™ã‹ï¼Ÿ</div>
        <div class="question-hint">ä¸‹ã®ãƒªã‚¹ãƒˆã‹ã‚‰5ã¤ä»¥ä¸Šé¸ã‚“ã§ãã ã•ã„ï¼ˆã“ã‚Œä»¥å¤–ã§ã‚‚OKï¼‰</div>

        <p style="margin: var(--spacing-sm) 0; font-weight: bold;">é¸ã‚“ã æ‰èƒ½ï¼š</p>
        <div class="selected-talents" id="selectedTalents">
          <span style="color: var(--gray);">ä¸‹ã‹ã‚‰é¸æŠã—ã¦ãã ã•ã„</span>
        </div>

        <div class="category-title">ğŸ”´ ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç³»</div>
        <div class="talent-grid" id="talents-communication"></div>

        <div class="category-title">ğŸ”µ æƒ…å ±æ•´ç†ãƒ»åˆ†æç³»</div>
        <div class="talent-grid" id="talents-analysis"></div>

        <div class="category-title">ğŸŸ¢ ç™ºä¿¡ãƒ»è¡¨ç¾ç³»</div>
        <div class="talent-grid" id="talents-expression"></div>

        <div class="category-title">ğŸŸ¡ ã‚µãƒãƒ¼ãƒˆãƒ»è£æ–¹ç³»</div>
        <div class="talent-grid" id="talents-support"></div>

        <div class="category-title">ğŸŸ  ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãƒ»æ¨é€²ç³»</div>
        <div class="talent-grid" id="talents-leadership"></div>

        <div class="category-title">ğŸŸ¡ è¡Œå‹•ãƒ»å®Ÿè¡Œç³»</div>
        <div class="talent-grid" id="talents-action"></div>

        <div class="category-title">ğŸ”´ äººé–“é–¢ä¿‚ãƒ»ãƒãƒ¼ãƒ ç³»</div>
        <div class="talent-grid" id="talents-team"></div>

        <div class="category-title">ğŸŸ¢ äººã«ä¸ãˆã‚‹åŠ›ç³»</div>
        <div class="talent-grid" id="talents-giving"></div>

        <div class="category-title">ğŸ”´ ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»ç™ºæƒ³ç³»</div>
        <div class="talent-grid" id="talents-creative"></div>

        <div class="category-title">ğŸ”µ å®Ÿè¡Œãƒ»ç¶™ç¶šãƒ»æ”¹å–„ç³»</div>
        <div class="talent-grid" id="talents-execution"></div>
      </div>
    </div>

    <!-- Q8 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q8</span>ãã®5ã¤ã«å„ªå…ˆé †ä½ã‚’ã¤ã‘ã¦ã¿ã‚ˆã†ï¼</div>
        <div class="question-hint">ã€Œç‰¹ã«è‡ªåˆ†ã®æ ¸ã«ãªã£ã¦ã‚‹ã€ã¨æ€ã†é †ç•ªã§ä¸¦ã¹ã¦ã¿ã¾ã—ã‚‡ã†ï¼ãã®é †ç•ªãŒã‚ãªãŸã®ã€Œæ‰èƒ½ã®åˆ¤æ–­è»¸ã€ã«ãªã‚Šã¾ã™</div>
        <textarea id="q8" placeholder="ä¾‹ï¼‰â‘ ã‚„ã‚Šãã‚‹åŠ›â‘¡èª¿æ•´ã™ã‚‹åŠ›â‘¢ç™’ã™åŠ›â‘£å…±æ„Ÿã™ã‚‹åŠ›â‘¤ä¸–ç•Œè¦³ã‚’ä½œã‚‹åŠ›"></textarea>
      </div>
    </div>

    <!-- Q9 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q9</span>ã€Œè‡ªåˆ†ã®æ‰èƒ½ã®èª¬æ˜æ›¸ã€ã‚’ä½œã‚ã†ï¼ˆã¾ã¨ã‚ãƒ¯ãƒ¼ã‚¯ï¼‰</div>
        <textarea id="q9" placeholder="ä¾‹ï¼‰
ãƒ»ç§ã¯ã€‡ã€‡ãªã¨ãã«åŠ›ã‚’ç™ºæ®ã™ã‚‹
ãƒ»ç§ã¯äººã‚ˆã‚Šã€‡ã€‡ãŒå¾—æ„ã ã¨æ„Ÿã˜ã‚‹
ãƒ»ç§ã¯ã€‡ã€‡ãªäººã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã®ãŒå¾—æ„" style="min-height: 150px;"></textarea>
      </div>

      <div style="background: var(--light-green); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-md);">
        <p style="text-align: center; font-size: 1.1rem; color: #2e7d32;"><strong>ãƒ¯ãƒ¼ã‚¯ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</strong></p>
        <p style="text-align: center; margin-top: var(--spacing-sm);">
          ã‚ãªãŸãŒã€Œç„¡æ„è­˜ã«ã‚„ã£ã¦ã„ãŸã“ã¨ã€ã®ä¸­ã«ã€ã™ã§ã«ã‚ãªãŸã ã‘ã®æ‰èƒ½ãŒçœ ã£ã¦ã„ã¾ã—ãŸã€‚<br>
          æ‰èƒ½ã¨ã¯ã€é ‘å¼µã‚‰ãªãã¦ã‚‚äººã®å½¹ã«ç«‹ã¦ã‚‹åŠ›ã€‚<br>
          ãã®æ‰èƒ½ã‚’ä¿¡ã˜ã¦ã€å°ã•ãã§ã‚‚ä¸€æ­©ãšã¤æ´»ã‹ã—ã¦ã„ã“ã†ğŸŒ±
        </p>
      </div>
    </div>
  </div>

  <nav class="nav-bottom">
    <a href="04-values.html" class="btn btn-secondary">â† å‰ã¸</a>
    <a href="../index.html" class="btn btn-home">ç›®æ¬¡ã«æˆ»ã‚‹</a>
    <button class="btn btn-save" onclick="saveData()">ä¿å­˜ã™ã‚‹</button>
    <a href="06-passion.html" class="btn btn-primary">æ¬¡ã¸ â†’</a>
  </nav>
  <div class="toast" id="toast"></div>

  <!-- Lark APIé€£æº -->
  <script src="../js/lark-api.js"></script>
  <script src="../js/lark-config.js"></script>
  <script src="../js/data-sync.js"></script>
  <script src="../js/save-helper.js"></script>

  <script>
    const talentsData = {
      communication: ["èãå‡ºã™åŠ›", "å…±æ„Ÿã™ã‚‹åŠ›", "å¯„ã‚Šæ·»ã†åŠ›", "è©±ã‚’ã¾ã¨ã‚ã‚‹åŠ›", "èƒŒä¸­ã‚’æŠ¼ã™åŠ›", "æ°—æŒã¡ã‚’è¨€è‘‰ã«ã™ã‚‹åŠ›", "å’Œã¾ã›ã‚‹åŠ›", "è³ªå•ã™ã‚‹åŠ›", "å®‰å¿ƒã•ã›ã‚‹åŠ›", "æœ¬éŸ³ã‚’å¼•ãå‡ºã™åŠ›"],
      analysis: ["æ§‹é€ åŒ–ã™ã‚‹åŠ›", "å›³è§£ã™ã‚‹åŠ›", "æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹åŠ›", "è¦ç‚¹ã‚’æŠ½å‡ºã™ã‚‹åŠ›", "æ·±æ˜ã‚Šã™ã‚‹åŠ›", "åˆ†æã™ã‚‹åŠ›", "é•å’Œæ„Ÿã«æ°—ã¥ãåŠ›", "å•é¡Œç‚¹ã‚’è¦‹ã¤ã‘ã‚‹åŠ›", "ãƒ­ã‚¸ãƒƒã‚¯ã§è€ƒãˆã‚‹åŠ›", "æ•´ç†æ•´é “ã™ã‚‹åŠ›"],
      expression: ["è¨€èªåŒ–ã™ã‚‹åŠ›", "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«ã™ã‚‹åŠ›", "é­…ã›æ–¹ã‚’è€ƒãˆã‚‹åŠ›", "ç™ºä¿¡ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹åŠ›", "ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ã‚’ä½œã‚‹åŠ›", "ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’ã¤ãã‚‹åŠ›", "ä¸–ç•Œè¦³ã‚’ã¤ãã‚‹åŠ›", "æƒ³ã„ã‚’å±Šã‘ã‚‹åŠ›", "æ„Ÿæƒ…ã‚’è¡¨ç¾ã™ã‚‹åŠ›", "ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å½¢ã«ã™ã‚‹åŠ›"],
      support: ["è£æ–¹ã«å¾¹ã™ã‚‹åŠ›", "äººã‚’æ”¯ãˆã‚‹åŠ›", "äº‹å‹™ã‚’ã“ãªã™åŠ›", "ãƒŸã‚¹ã‚’é˜²ãåŠ›", "ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹åŠ›", "ç¸ã®ä¸‹ã§å‹•ãåŠ›", "ä¸å¯§ã«ä»•ä¸Šã’ã‚‹åŠ›", "äººã®å‹•ãã‚’èª­ã‚€åŠ›", "ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹åŠ›", "å¿è€å¼·ãå–ã‚Šçµ„ã‚€åŠ›"],
      leadership: ["å·»ãè¾¼ã‚€åŠ›", "ææ¡ˆã™ã‚‹åŠ›", "æ——ã‚’ç«‹ã¦ã‚‹åŠ›", "æ„æ€æ±ºå®šã™ã‚‹åŠ›", "ä¸»ä½“çš„ã«å‹•ãåŠ›", "ãƒ“ã‚¸ãƒ§ãƒ³ã‚’æãåŠ›", "ç›®æ¨™ã«å‘ã‘ã¦å‹•ãåŠ›", "ãƒãƒ¼ãƒ ã‚’å¼•ã£å¼µã‚‹åŠ›", "å‘¨ã‚Šã‚’æ´»æ€§åŒ–ã•ã›ã‚‹åŠ›", "ãƒªã‚¹ã‚¯ã‚’ã¨ã‚‹åŠ›"],
      action: ["å®Ÿè¡Œã«ç§»ã™åŠ›", "ä»•çµ„ã¿åŒ–ã™ã‚‹åŠ›", "ã‚„ã‚Šãã‚‹åŠ›", "ç¶šã‘ã‚‹åŠ›", "ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã‚’å‡ºã™åŠ›", "æ®µå–ã‚Šã™ã‚‹åŠ›", "å„ªå…ˆé †ä½ã‚’ã¤ã‘ã‚‹åŠ›", "ãƒ«ãƒ¼ãƒ«ã‚’ã¤ãã‚‹åŠ›", "ã‚¿ã‚¹ã‚¯ã‚’ç®¡ç†ã™ã‚‹åŠ›", "è¨ˆç”»ã‚’ç«‹ã¦ã‚‹åŠ›"],
      team: ["ç©ºæ°—ã‚’èª­ã‚€åŠ›", "å½¹å‰²ã‚’å¯Ÿã™ã‚‹åŠ›", "å”åŠ›ã™ã‚‹åŠ›", "ä»²é–“ã‚’å¤§äº‹ã«ã™ã‚‹åŠ›", "è£æ–¹ã«å¾¹ã™ã‚‹åŠ›", "ä¿¡é ¼é–¢ä¿‚ã‚’ç¯‰ãåŠ›", "ç›¸æ‰‹ã®ç«‹å ´ã§è€ƒãˆã‚‹åŠ›", "èª¿æ•´ã™ã‚‹åŠ›", "é›°å›²æ°—ã‚’è‰¯ãã™ã‚‹åŠ›", "ãƒãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã‚‹åŠ›"],
      giving: ["ç™’ã™åŠ›", "æ¥½ã—ã¾ã›ã‚‹åŠ›", "å‹‡æ°—ã¥ã‘ã‚‹åŠ›", "æ°—ã¥ãã‚’ä¸ãˆã‚‹åŠ›", "æ„Ÿæƒ…ã‚’å‹•ã‹ã™åŠ›", "å®‰å¿ƒæ„Ÿã‚’å±Šã‘ã‚‹åŠ›", "å¸Œæœ›ã‚’ä¼ãˆã‚‹åŠ›", "èƒŒä¸­ã‚’æŠ¼ã™åŠ›", "ä¿¡é ¼ã•ã‚Œã‚‹åŠ›", "ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é«˜ã‚ã‚‹åŠ›"],
      creative: ["ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‡ºã™åŠ›", "ã²ã‚‰ã‚ãåŠ›", "æŠ½è±¡ã‚’å…·ä½“ã«ã™ã‚‹åŠ›", "ç©ºæƒ³ã‚’å½¢ã«ã™ã‚‹åŠ›", "ç›´æ„Ÿã§å‹•ãåŠ›", "æ–°ã—ã„è¦–ç‚¹ã‚’æŒã¤åŠ›", "æ„Ÿæ€§ã§ã¨ã‚‰ãˆã‚‹åŠ›", "ç‹¬è‡ªã®ä¸–ç•Œè¦³ã‚’è¡¨ç¾ã™ã‚‹åŠ›", "ã‚¼ãƒ­ã‹ã‚‰ä½œã‚‹åŠ›", "ã‚¢ãƒ¬ãƒ³ã‚¸ã™ã‚‹åŠ›"],
      execution: ["å°ã•ãå§‹ã‚ã‚‹åŠ›", "ç¶šã‘ã‚‹ä»•çµ„ã¿ã‚’ä½œã‚‹åŠ›", "æ”¹å–„ã™ã‚‹åŠ›", "ã“ã¤ã“ã¤ç©ã¿ä¸Šã’ã‚‹åŠ›", "è©¦ã—ã¦æ¤œè¨¼ã™ã‚‹åŠ›", "æ—©ãå‹•ãåŠ›", "ç²˜ã‚Šå¼·ãã‚„ã‚‹åŠ›", "æœ€å¾Œã¾ã§ã‚„ã‚Šåˆ‡ã‚‹åŠ›", "è‡ªåˆ†ã‚’å¾‹ã™ã‚‹åŠ›", "æ¯æ—¥ç¿’æ…£åŒ–ã™ã‚‹åŠ›"]
    };

    let selectedTalents = [];

    function renderTalentTags() {
      Object.keys(talentsData).forEach(category => {
        const container = document.getElementById(`talents-${category}`);
        if (container) {
          talentsData[category].forEach(talent => {
            const tag = document.createElement('div');
            tag.className = 'talent-tag';
            tag.textContent = talent;
            tag.onclick = () => toggleTalent(talent, tag);
            container.appendChild(tag);
          });
        }
      });
    }

    function toggleTalent(talent, tagEl) {
      const index = selectedTalents.indexOf(talent);
      if (index === -1) {
        selectedTalents.push(talent);
        tagEl.classList.add('selected');
      } else {
        selectedTalents.splice(index, 1);
        tagEl.classList.remove('selected');
      }
      updateSelectedDisplay();
    }

    function updateSelectedDisplay() {
      const container = document.getElementById('selectedTalents');
      if (selectedTalents.length === 0) {
        container.innerHTML = '<span style="color: var(--gray);">ä¸‹ã‹ã‚‰é¸æŠã—ã¦ãã ã•ã„</span>';
      } else {
        container.innerHTML = selectedTalents.map(t =>
          `<span class="selected-talent">${t}<span class="remove" onclick="removeTalent('${t}')">Ã—</span></span>`
        ).join('');
      }
      updateProgress();
    }

    function removeTalent(talent) {
      const index = selectedTalents.indexOf(talent);
      if (index !== -1) {
        selectedTalents.splice(index, 1);
        document.querySelectorAll('.talent-tag').forEach(tag => {
          if (tag.textContent === talent) tag.classList.remove('selected');
        });
        updateSelectedDisplay();
      }
    }

    function updateProgress() {
      const fields = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6-1', 'q8', 'q9'];
      let filled = 0;
      fields.forEach(id => {
        const el = document.getElementById(id);
        if (el && el.value.trim()) filled++;
      });
      if (selectedTalents.length > 0) filled++;
      const progress = (filled / (fields.length + 1)) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
    }

    function saveData() {
      const checkFields = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6-1', 'q8', 'q9'];
      SaveHelper.save(checkFields, doSave);
    }

    async function doSave(isDraft) {
      const data = {
        q1: document.getElementById('q1').value,
        q2: document.getElementById('q2').value,
        q3: document.getElementById('q3').value,
        q4: document.getElementById('q4').value,
        q5: document.getElementById('q5').value,
        q6: [
          document.getElementById('q6-1').value,
          document.getElementById('q6-2').value,
          document.getElementById('q6-3').value,
          document.getElementById('q6-4').value,
          document.getElementById('q6-5').value
        ],
        q7: selectedTalents,
        q8: document.getElementById('q8').value,
        q9: document.getElementById('q9').value,
        isDraft: isDraft,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('selfUnderstanding_talent', JSON.stringify(data));

      // Lark BaseåŒæœŸ
      if (window.DataSync) {
        try {
          await window.DataSync.saveWorkData('talent', data);
        } catch (e) {
          console.error('Lark sync failed:', e);
        }
      }

      showToast(isDraft ? 'ä¸€æ™‚ä¿å­˜ã—ã¾ã—ãŸï¼' : 'ä¿å­˜ã—ã¾ã—ãŸï¼', 'success');
    }

    function loadData() {
      const saved = localStorage.getItem('selfUnderstanding_talent');
      if (saved) {
        const data = JSON.parse(saved);
        document.getElementById('q1').value = data.q1 || '';
        document.getElementById('q2').value = data.q2 || '';
        document.getElementById('q3').value = data.q3 || '';
        document.getElementById('q4').value = data.q4 || '';
        document.getElementById('q5').value = data.q5 || '';
        if (data.q6) {
          data.q6.forEach((v, i) => {
            const el = document.getElementById(`q6-${i+1}`);
            if (el) el.value = v || '';
          });
        }
        if (data.q7) {
          selectedTalents = data.q7;
          selectedTalents.forEach(talent => {
            document.querySelectorAll('.talent-tag').forEach(tag => {
              if (tag.textContent === talent) tag.classList.add('selected');
            });
          });
          updateSelectedDisplay();
        }
        document.getElementById('q8').value = data.q8 || '';
        document.getElementById('q9').value = data.q9 || '';
        updateProgress();
      }
    }

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast ' + type + ' show';
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    document.querySelectorAll('textarea, input').forEach(el => {
      el.addEventListener('input', updateProgress);
    });

    document.addEventListener('DOMContentLoaded', () => {
      renderTalentTags();
      loadData();
    });
  </script>
</body>
</html>
