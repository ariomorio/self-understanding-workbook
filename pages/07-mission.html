<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä½¿å‘½ãƒ»åˆ¤æ–­è»¸ãƒ¯ãƒ¼ã‚¯ | è‡ªå·±ç†è§£ã®æ•™ç§‘æ›¸</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .mv-section {
      margin-bottom: var(--spacing-lg);
    }
    .mv-header {
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--radius-sm) var(--radius-sm) 0 0;
      font-weight: bold;
      color: var(--white);
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    .mv-header.valley { background: linear-gradient(135deg, #e57373, #ef5350); }
    .mv-header.mountain { background: linear-gradient(135deg, #ffd54f, #ffb300); }
    .mv-content {
      background: var(--white);
      padding: var(--spacing-md);
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      border: 2px solid #e0e0e0;
      border-top: none;
    }
    .episode-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-sm);
    }
    @media (max-width: 768px) {
      .episode-grid { grid-template-columns: 1fr; }
    }
    .episode-card {
      background: var(--gray-light);
      border-radius: var(--radius-sm);
      padding: var(--spacing-sm);
    }
    .episode-card.valley { background: #ffebee; }
    .episode-card.mountain { background: #fffde7; }
    .episode-card h4 {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: var(--spacing-xs);
      text-align: center;
    }
    .episode-card textarea {
      min-height: 80px;
      font-size: 0.9rem;
    }
    .field-label {
      font-weight: bold;
      color: var(--primary-brown);
      margin-bottom: var(--spacing-xs);
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }
    .field-label.valley { color: #c62828; }
    .field-label.mountain { color: #f57f17; }
    .core-word-section {
      background: linear-gradient(135deg, #e1bee7, #ce93d8);
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
      margin: var(--spacing-lg) 0;
    }
    .core-word-section h3 {
      color: var(--white);
      margin-bottom: var(--spacing-sm);
    }
    .final-section {
      background: linear-gradient(135deg, #80deea, #4dd0e1);
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
    }
    .final-section h3 {
      color: var(--white);
      margin-bottom: var(--spacing-md);
    }
    .final-item {
      background: rgba(255,255,255,0.9);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      margin-bottom: var(--spacing-sm);
    }
    .final-item h4 {
      color: var(--primary-brown);
      margin-bottom: var(--spacing-xs);
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }
    .final-item p {
      font-size: 0.85rem;
      color: var(--text-light);
      margin-bottom: var(--spacing-sm);
    }
  </style>
</head>
<body>
  <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

  <header class="page-header">
    <h1><span class="icon">ğŸ§­</span> ä½¿å‘½ãƒ»åˆ¤æ–­è»¸ãƒ¯ãƒ¼ã‚¯</h1>
    <a href="https://drive.google.com/file/d/1h2h95RzaSrxU6l-oTw-SBFg2uXP5bVWn/view" target="_blank" class="video-link">è§£èª¬å‹•ç”»ã¯ã“ã¡ã‚‰</a>
  </header>

  <div class="container">
    <div class="section">
      <h2 class="section-title">ã€ç›®çš„ã€‘ã‚ãªãŸã®äººç”Ÿã‚’ã‚ˆã‚Šè¼ã‹ã›ã‚‹ã€Œäººç”Ÿã®ç›®çš„ãƒ»ä½¿å‘½ãƒ»åˆ¤æ–­è»¸ã€ã‚’å°ãå‡ºãã†</h2>
    </div>

    <!-- â‘  äººç”Ÿã®è°· -->
    <div class="mv-section">
      <div class="mv-header valley">
        <span style="font-size: 1.5rem;">ğŸ“‰</span>
        â‘  äººç”Ÿã®ã€è°·ã€‘ã¨æ„Ÿã˜ã‚‹ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’3ã¤æ›¸ãå‡ºã—ã¦ãã ã•ã„
      </div>
      <div class="mv-content">
        <p style="margin-bottom: var(--spacing-md);">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ã¦ã€ãªãœãã‚ŒãŒæ‚²ã—ã‹ã£ãŸã®ã‹</p>

        <div class="episode-grid">
          <div class="episode-card valley">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 1</h4>
            <div class="field-label valley">ã„ã¤</div>
            <input type="text" id="valley1-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label valley">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="valley1-what" placeholder="æœ€ã‚‚è¾›ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label valley">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="valley1-emotion" placeholder="æ‚²ã—ã„ã€æ‚”ã—ã„ã€å­¤ç‹¬..."></textarea>
            <div class="field-label valley">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸‹ãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley1-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒ..."></textarea>
            <div class="field-label valley">ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã‚Šå§‹ã‚ãŸãã£ã‹ã‘ã¯ï¼Ÿ</div>
            <textarea id="valley1-recovery" placeholder="ä½•ãŒãã£ã‹ã‘ã§å›å¾©ã—ãŸï¼Ÿ"></textarea>
            <div class="field-label valley">ä½•ã‚’å¾—ã‚‹ãŸã‚ã«ãã®ä½“é¨“ã‚’ã—ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley1-learn" placeholder="ä»Šæ€ãˆã°ã€ã“ã®çµŒé¨“ã‹ã‚‰..."></textarea>
          </div>

          <div class="episode-card valley">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 2</h4>
            <div class="field-label valley">ã„ã¤</div>
            <input type="text" id="valley2-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label valley">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="valley2-what" placeholder="æœ€ã‚‚è¾›ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label valley">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="valley2-emotion" placeholder="æ‚²ã—ã„ã€æ‚”ã—ã„ã€å­¤ç‹¬..."></textarea>
            <div class="field-label valley">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸‹ãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley2-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒ..."></textarea>
            <div class="field-label valley">ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã‚Šå§‹ã‚ãŸãã£ã‹ã‘ã¯ï¼Ÿ</div>
            <textarea id="valley2-recovery" placeholder="ä½•ãŒãã£ã‹ã‘ã§å›å¾©ã—ãŸï¼Ÿ"></textarea>
            <div class="field-label valley">ä½•ã‚’å¾—ã‚‹ãŸã‚ã«ãã®ä½“é¨“ã‚’ã—ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley2-learn" placeholder="ä»Šæ€ãˆã°ã€ã“ã®çµŒé¨“ã‹ã‚‰..."></textarea>
          </div>

          <div class="episode-card valley">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 3</h4>
            <div class="field-label valley">ã„ã¤</div>
            <input type="text" id="valley3-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label valley">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="valley3-what" placeholder="æœ€ã‚‚è¾›ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label valley">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="valley3-emotion" placeholder="æ‚²ã—ã„ã€æ‚”ã—ã„ã€å­¤ç‹¬..."></textarea>
            <div class="field-label valley">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸‹ãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley3-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒ..."></textarea>
            <div class="field-label valley">ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã‚Šå§‹ã‚ãŸãã£ã‹ã‘ã¯ï¼Ÿ</div>
            <textarea id="valley3-recovery" placeholder="ä½•ãŒãã£ã‹ã‘ã§å›å¾©ã—ãŸï¼Ÿ"></textarea>
            <div class="field-label valley">ä½•ã‚’å¾—ã‚‹ãŸã‚ã«ãã®ä½“é¨“ã‚’ã—ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="valley3-learn" placeholder="ä»Šæ€ãˆã°ã€ã“ã®çµŒé¨“ã‹ã‚‰..."></textarea>
          </div>
        </div>

        <div style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: #ffcdd2; border-radius: var(--radius-sm);">
          <div class="field-label valley">â–¼ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸‹ãŒã‚‹ã®ã¯ã©ã‚“ãªã¨ãã‹ï¼Ÿ</div>
          <textarea id="valley-summary" placeholder="è°·ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‹ã‚‰è¦‹ãˆã¦ããŸå…±é€šç‚¹..."></textarea>
        </div>
      </div>
    </div>

    <!-- â‘¡ äººç”Ÿã®å±± -->
    <div class="mv-section">
      <div class="mv-header mountain">
        <span style="font-size: 1.5rem;">ğŸ“ˆ</span>
        â‘¡ äººç”Ÿã®ã€å±±ã€‘ã¨æ„Ÿã˜ã‚‹ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’3ã¤æ›¸ãå‡ºã—ã¦ãã ã•ã„
      </div>
      <div class="mv-content">
        <p style="margin-bottom: var(--spacing-md);">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ã¦ã€ãªãœãã‚ŒãŒå¬‰ã—ã‹ã£ãŸã®ã‹</p>

        <div class="episode-grid">
          <div class="episode-card mountain">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 1</h4>
            <div class="field-label mountain">ã„ã¤</div>
            <input type="text" id="mountain1-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label mountain">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="mountain1-what" placeholder="æœ€ã‚‚å¬‰ã—ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label mountain">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="mountain1-emotion" placeholder="å¬‰ã—ã„ã€é”æˆæ„Ÿã€å¹¸ç¦..."></textarea>
            <div class="field-label mountain">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="mountain1-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒæº€ãŸã•ã‚ŒãŸ..."></textarea>
          </div>

          <div class="episode-card mountain">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 2</h4>
            <div class="field-label mountain">ã„ã¤</div>
            <input type="text" id="mountain2-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label mountain">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="mountain2-what" placeholder="æœ€ã‚‚å¬‰ã—ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label mountain">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="mountain2-emotion" placeholder="å¬‰ã—ã„ã€é”æˆæ„Ÿã€å¹¸ç¦..."></textarea>
            <div class="field-label mountain">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="mountain2-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒæº€ãŸã•ã‚ŒãŸ..."></textarea>
          </div>

          <div class="episode-card mountain">
            <h4>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ 3</h4>
            <div class="field-label mountain">ã„ã¤</div>
            <input type="text" id="mountain3-when" placeholder="æ™‚æœŸã‚„å¹´é½¢" style="width:100%; padding:8px; margin-bottom:8px; border:2px solid #e0e0e0; border-radius:8px;">
            <div class="field-label mountain">ä½•ãŒèµ·ããŸã‹ï¼Ÿ</div>
            <textarea id="mountain3-what" placeholder="æœ€ã‚‚å¬‰ã—ã‹ã£ãŸå ´é¢ã‚’åˆ‡ã‚ŠæŠœãã¨..."></textarea>
            <div class="field-label mountain">ã©ã‚“ãªæ„Ÿæƒ…ã«ãªã£ãŸã‹ï¼Ÿ</div>
            <textarea id="mountain3-emotion" placeholder="å¬‰ã—ã„ã€é”æˆæ„Ÿã€å¹¸ç¦..."></textarea>
            <div class="field-label mountain">ãªãœã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã£ãŸã®ã‹ï¼Ÿ</div>
            <textarea id="mountain3-why" placeholder="å¤§åˆ‡ã«ã—ã¦ã„ãŸã‚‚ã®ãŒæº€ãŸã•ã‚ŒãŸ..."></textarea>
          </div>
        </div>

        <div style="margin-top: var(--spacing-md); padding: var(--spacing-sm); background: #fff9c4; border-radius: var(--radius-sm);">
          <div class="field-label mountain">â–¼ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä¸ŠãŒã‚‹ã®ã¯ã©ã‚“ãªã¨ãã‹ï¼Ÿ</div>
          <textarea id="mountain-summary" placeholder="å±±ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‹ã‚‰è¦‹ãˆã¦ããŸå…±é€šç‚¹..."></textarea>
        </div>
      </div>
    </div>

    <!-- â‘¢ ã‚³ã‚¢ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º -->
    <div class="core-word-section">
      <h3>â‘¢ã€è°·ã€‘ã¨ã€å±±ã€‘ã«å…±é€šã™ã‚‹ã‚³ã‚¢ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¾ã—ã‚‡ã†</h3>
      <p style="color: var(--white); margin-bottom: var(--spacing-sm);">ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ä¸ŠãŒã‚Šä¸‹ãŒã‚Šã‹ã‚‰ã‚³ã‚¢ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¦ã¿ã‚ˆã†</p>
      <div style="background: rgba(255,255,255,0.9); padding: var(--spacing-md); border-radius: var(--radius-sm);">
        <div class="field-label">è‡ªåˆ†ã‚‰ã—ã•ãƒ¯ãƒ¼ãƒ‰</div>
        <textarea id="core-words" placeholder="ä¾‹ï¼‰ã¤ãªãŒã‚Šã€æˆé•·ã€è‡ªç”±ã€è²¢çŒ®ã€æŒ‘æˆ¦..." style="min-height: 100px;"></textarea>
      </div>
    </div>

    <!-- â‘£ ä½¿å‘½ãƒ»ç›®çš„ãƒ»åˆ¤æ–­è»¸ -->
    <div class="final-section">
      <h3>â‘£ ã‚³ã‚¢ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ã€ã‚ãªãŸã®äººç”Ÿã«ãŠã‘ã‚‹ã€ä½¿å‘½ãƒ»ç›®çš„ãƒ»åˆ¤æ–­è»¸ã€‘ã‚’å°ãå‡ºãã†</h3>
      <p style="color: var(--white); margin-bottom: var(--spacing-md);">ã“ã‚Œã‹ã‚‰ã®äººç”Ÿã®æŒ‡é‡ã‚’ç™ºæ˜ã—ã¾ã—ã‚‡ã†</p>

      <div class="final-item">
        <h4>ğŸ“ æ–‡ç« åŒ–</h4>
        <p>è‡ªåˆ†ã‚‰ã—ã•ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰è¦‹ãˆã¦ããŸè‡ªåˆ†ã®ã“ã ã‚ã‚Šã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ãªãŒã‚‰ã€æ–‡ç« ã«ã—ã¦ã¿ã‚ˆã†</p>
        <textarea id="verbalize" placeholder="è‡ªåˆ†ã®è¨€è‘‰ã§æ–‡ç« ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†..." style="min-height: 120px;"></textarea>
      </div>

      <div class="final-item">
        <h4>ğŸ¯ ã€äººç”Ÿã®ç›®çš„ã€‘</h4>
        <p>ã‚ãªãŸã¯ã©ã‚“ãªäººç”Ÿã‚’é€ã‚ŒãŸã‚‰å¹¸ã›ãªã®ã‹ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å†…å´ã«å‘ã‘ãŸã‚‚ã®ï¼‰</p>
        <textarea id="life-purpose" placeholder="ç§ã¯ã€‡ã€‡ãªäººç”Ÿã‚’é€ã‚ŠãŸã„..." style="min-height: 100px;"></textarea>
      </div>

      <div class="final-item">
        <h4>ğŸš€ ã€äººç”Ÿã®ä½¿å‘½ã€‘</h4>
        <p>ã‚ãªãŸã®äººç”Ÿã§ä½•ã‚’æˆã—é‚ã’ãŸã„ã®ã‹ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¤–å´ã«å‘ã‘ãŸã‚‚ã®ï¼‰</p>
        <textarea id="life-mission" placeholder="ç§ã¯ã€‡ã€‡ã‚’æˆã—é‚ã’ãŸã„..." style="min-height: 100px;"></textarea>
      </div>

      <div class="final-item">
        <h4>ğŸ§­ å¿ƒã®ã‚³ãƒ³ãƒ‘ã‚¹ã€äººç”Ÿã®åˆ¤æ–­è»¸ã€‘</h4>
        <p>ç¾åœ¨ã‚‚ã£ã¨ã‚‚å¤§äº‹ã«ã—ã¦ã„ã‚‹åˆ¤æ–­åŸºæº–ã¯ä½•ã‹</p>
        <textarea id="life-compass" placeholder="è¿·ã£ãŸã¨ãã¯ã€‡ã€‡ã‚’åŸºæº–ã«æ±ºã‚ã‚‹..." style="min-height: 100px;"></textarea>
      </div>
    </div>

    <div style="background: var(--light-green); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-lg);">
      <p style="text-align: center; font-size: 1.1rem; color: #2e7d32;"><strong>ãƒ¯ãƒ¼ã‚¯ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</strong></p>
      <p style="text-align: center; margin-top: var(--spacing-sm);">
        ã‚ãªãŸã®äººç”Ÿã®å±±ã¨è°·ã‹ã‚‰ã€ã‚ãªãŸã ã‘ã®ã€ä½¿å‘½ãƒ»ç›®çš„ãƒ»åˆ¤æ–­è»¸ã€‘ãŒè¦‹ãˆã¦ãã¾ã—ãŸã€‚<br>
        ã“ã‚Œã‹ã‚‰ã®é¸æŠã«è¿·ã£ãŸã¨ãã€ã“ã®è¨€è‘‰ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ğŸ§­
      </p>
    </div>
  </div>

  <nav class="nav-bottom">
    <a href="06-passion.html" class="btn btn-secondary">â† å‰ã¸</a>
    <button class="btn btn-save" onclick="saveData()">ä¿å­˜ã™ã‚‹</button>
    <a href="08-become.html" class="btn btn-primary">æ¬¡ã¸ â†’</a>
  </nav>
  <div class="toast" id="toast"></div>

  <!-- Lark APIé€£æº -->
  <script src="../js/lark-api.js"></script>
  <script src="../js/lark-config.js"></script>
  <script src="../js/data-sync.js"></script>

  <script>
    function updateProgress() {
      const allInputs = document.querySelectorAll('textarea, input[type="text"]');
      let filled = 0;
      allInputs.forEach(el => {
        if (el.value.trim()) filled++;
      });
      const progress = (filled / allInputs.length) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
    }

    function saveData() {
      const data = {
        valley: [
          { when: document.getElementById('valley1-when').value, what: document.getElementById('valley1-what').value, emotion: document.getElementById('valley1-emotion').value, why: document.getElementById('valley1-why').value, recovery: document.getElementById('valley1-recovery').value, learn: document.getElementById('valley1-learn').value },
          { when: document.getElementById('valley2-when').value, what: document.getElementById('valley2-what').value, emotion: document.getElementById('valley2-emotion').value, why: document.getElementById('valley2-why').value, recovery: document.getElementById('valley2-recovery').value, learn: document.getElementById('valley2-learn').value },
          { when: document.getElementById('valley3-when').value, what: document.getElementById('valley3-what').value, emotion: document.getElementById('valley3-emotion').value, why: document.getElementById('valley3-why').value, recovery: document.getElementById('valley3-recovery').value, learn: document.getElementById('valley3-learn').value }
        ],
        valleySummary: document.getElementById('valley-summary').value,
        mountain: [
          { when: document.getElementById('mountain1-when').value, what: document.getElementById('mountain1-what').value, emotion: document.getElementById('mountain1-emotion').value, why: document.getElementById('mountain1-why').value },
          { when: document.getElementById('mountain2-when').value, what: document.getElementById('mountain2-what').value, emotion: document.getElementById('mountain2-emotion').value, why: document.getElementById('mountain2-why').value },
          { when: document.getElementById('mountain3-when').value, what: document.getElementById('mountain3-what').value, emotion: document.getElementById('mountain3-emotion').value, why: document.getElementById('mountain3-why').value }
        ],
        mountainSummary: document.getElementById('mountain-summary').value,
        coreWords: document.getElementById('core-words').value,
        verbalize: document.getElementById('verbalize').value,
        lifePurpose: document.getElementById('life-purpose').value,
        lifeMission: document.getElementById('life-mission').value,
        lifeCompass: document.getElementById('life-compass').value,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('selfUnderstanding_mission', JSON.stringify(data));
      showToast('ä¿å­˜ã—ã¾ã—ãŸï¼', 'success');
    }

    function loadData() {
      const saved = localStorage.getItem('selfUnderstanding_mission');
      if (saved) {
        const data = JSON.parse(saved);
        if (data.valley) {
          data.valley.forEach((v, i) => {
            const n = i + 1;
            document.getElementById(`valley${n}-when`).value = v.when || '';
            document.getElementById(`valley${n}-what`).value = v.what || '';
            document.getElementById(`valley${n}-emotion`).value = v.emotion || '';
            document.getElementById(`valley${n}-why`).value = v.why || '';
            document.getElementById(`valley${n}-recovery`).value = v.recovery || '';
            document.getElementById(`valley${n}-learn`).value = v.learn || '';
          });
        }
        document.getElementById('valley-summary').value = data.valleySummary || '';
        if (data.mountain) {
          data.mountain.forEach((m, i) => {
            const n = i + 1;
            document.getElementById(`mountain${n}-when`).value = m.when || '';
            document.getElementById(`mountain${n}-what`).value = m.what || '';
            document.getElementById(`mountain${n}-emotion`).value = m.emotion || '';
            document.getElementById(`mountain${n}-why`).value = m.why || '';
          });
        }
        document.getElementById('mountain-summary').value = data.mountainSummary || '';
        document.getElementById('core-words').value = data.coreWords || '';
        document.getElementById('verbalize').value = data.verbalize || '';
        document.getElementById('life-purpose').value = data.lifePurpose || '';
        document.getElementById('life-mission').value = data.lifeMission || '';
        document.getElementById('life-compass').value = data.lifeCompass || '';
        updateProgress();
      }
    }

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast ' + type + ' show';
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    document.querySelectorAll('textarea, input').forEach(el => {
      el.addEventListener('input', updateProgress);
    });

    document.addEventListener('DOMContentLoaded', loadData);
  </script>
</body>
</html>
