<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>情熱ワーク | マイコンパス</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .passion-check-item {
      display: flex; flex-wrap: wrap;
      align-items: flex-start;
      gap: var(--spacing-sm);
      padding: var(--spacing-sm);
      background: var(--white);
      border: 2px solid #e0e0e0;
      border-radius: var(--radius-sm);
      margin-bottom: var(--spacing-xs);
      cursor: pointer;
      transition: all 0.2s;
    }
    .passion-check-item:hover { border-color: var(--primary-orange); background: var(--light-orange); }
    .passion-check-item.selected { border-color: var(--primary-orange); background: var(--light-orange); }
    .passion-check-item .num {
      width: 28px; height: 28px;
      background: var(--gray-light);
      color: var(--text-dark);
      border-radius: var(--radius-full);
      display: flex; align-items: center; justify-content: center;
      font-size: 0.85rem; font-weight: bold; flex-shrink: 0;
    }
    .passion-check-item.selected .num { background: var(--primary-orange); color: var(--white); }
    .passion-check-item select {
      margin-left: 36px;
      padding: 8px;
      border: 2px solid #e0e0e0;
      border-radius: var(--radius-sm);
      width: calc(100% - 36px);
    }
    .diagnosis-result {
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
      text-align: center;
      margin-top: var(--spacing-md);
    }
    .diagnosis-result.passion { background: linear-gradient(135deg, #ff6b35, #f7931e); color: white; }
    .diagnosis-result.seed { background: linear-gradient(135deg, #7cb342, #aed581); color: white; }
    .diagnosis-result.admiration { background: linear-gradient(135deg, #90caf9, #64b5f6); color: white; }
    .diagnosis-result h3 { font-size: 1.5rem; margin-bottom: var(--spacing-sm); }
    .yes-count {
      font-size: 3rem;
      font-weight: bold;
      color: var(--primary-orange);
      display: block;
      margin: var(--spacing-sm) 0;
    }
  </style>
</head>
<body>
  <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

  <header class="page-header">
    <h1><span class="icon">🔥</span> 自己理解ワーク③：情熱</h1>
    <div class="video-section">
      <h3>📺 解説動画</h3>
      <div class="video-embed">
        <iframe src="https://drive.google.com/file/d/1ChgW9ad7lVDBekgx0fMVy9371iSV-x9D/preview" allow="autoplay" allowfullscreen></iframe>
      </div>
      <div class="video-fallback">
        <a href="https://drive.google.com/file/d/1ChgW9ad7lVDBekgx0fMVy9371iSV-x9D/view" target="_blank">動画が表示されない場合はこちら</a>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- 情熱とは -->
    <div class="section">
      <h2 class="section-title">情熱の正体を知る</h2>
      <div style="background: var(--light-yellow); padding: var(--spacing-md); border-radius: var(--radius-sm);">
        <p><strong>🔥 情熱とは？</strong></p>
        <p>「情熱＝頑張らなくても頑張れてしまうこと」</p>
        <p style="margin-top: var(--spacing-sm);">
          「やりたい」よりも「やらずにはいられない」感覚。<br>
          エネルギーが自然と湧いてくる活動領域。
        </p>
      </div>
    </div>

    <!-- Q1 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q1</span>何気なく見てしまうYouTube・雑誌・SNSは？</div>
        <div class="question-hint">「情報を集めたくなる対象＝興味のタネ」</div>
        <div class="question-example">サボテンの情報を知りたくなる</div>
        <textarea id="q1" placeholder="つい見てしまうコンテンツは..."></textarea>
      </div>
    </div>

    <!-- Q2 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q2</span>どんなことを話していると時間を忘れる？</div>
        <div class="question-hint">「話すテーマ＝情熱が燃える領域」</div>
        <div class="question-example">好きな野球チームの話</div>
        <textarea id="q2" placeholder="熱く語れるテーマは..."></textarea>
      </div>
    </div>

    <!-- Q3 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q3</span>お金にならなくても続けていることは？</div>
        <div class="question-hint">「打算抜きで続けられること＝本物の情熱」</div>
        <div class="question-example">相談に乗ってあげること</div>
        <textarea id="q3" placeholder="お金に関係なく続けていることは..."></textarea>
      </div>
    </div>

    <!-- Q4 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q4</span>最近「もっと知りたい」と思ったことは？</div>
        <div class="question-hint">知的好奇心も、情熱が芽生えるサイン</div>
        <div class="question-example">どうやったらガンプラを上手く作れるか</div>
        <textarea id="q4" placeholder="もっと知りたいことは..."></textarea>
      </div>
    </div>

    <!-- Q5 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q5</span>過去に「誰かに熱く語ったテーマ」は何？</div>
        <div class="question-hint">人に語りたくなることには"本音"と"想い"が宿っている</div>
        <div class="question-example">自己理解の大切さ</div>
        <textarea id="q5" placeholder="熱く語ったテーマは..."></textarea>
      </div>
    </div>

    <!-- Q6 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q6</span>この1ヶ月で「気づいたら検索してたこと」は？</div>
        <div class="question-hint">無意識の検索行動は、心が向いている方向</div>
        <div class="question-example">自己理解の深め方</div>
        <textarea id="q6" placeholder="気づいたら検索していたことは..."></textarea>
      </div>
    </div>

    <!-- Q7 情熱チェック -->
    <div class="section">
      <h2 class="section-title">それ、情熱？それとも憧れ？</h2>
      <p style="margin-bottom: var(--spacing-md);">ここまで情熱を探してきたけど【落とし穴】が…<br>それ、情熱じゃないかも…</p>

      <div class="question-card">
        <div class="question-text"><span class="question-number">Q7</span>それ情熱？憧れ？ どちらかチェックしてみよう</div>
        <div class="question-hint">以下の質問に直感で答えてみよう。YESが多ければ「情熱」です</div>

        <div id="passionChecklist">
          <!-- 10個のチェック項目 -->
        </div>

        <div style="text-align: center; margin-top: var(--spacing-md);">
          <span class="yes-count" id="yesCount">0</span>
          <span>/ 10 個がYES</span>
        </div>

        <div id="diagnosisResult" class="diagnosis-result" style="display: none;">
          <h3 id="resultTitle"></h3>
          <p id="resultDesc"></p>
        </div>

        <div style="background: var(--gray-light); padding: var(--spacing-md); border-radius: var(--radius-sm); margin-top: var(--spacing-md);">
          <p><strong>🔍 診断結果の見方</strong></p>
          <p>・YESが<strong>7個以上</strong> → 🔥「情熱」の可能性が高い</p>
          <p>・YESが<strong>4〜6個</strong> → 🌱「興味のタネ」の段階</p>
          <p>・YESが<strong>3個以下</strong> → 💭「憧れ」の可能性あり</p>
        </div>
      </div>
    </div>

    <!-- Q8 -->
    <div class="section">
      <h2 class="section-title">行動で確信に変える</h2>
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q8</span>その「好き」にまつわる体験を4つ以上書き出そう</div>
        <div class="question-hint">情熱を"思い込み"から"確信"に変えるステップ</div>
        <div class="question-example">「旅行が好き」→①小学生のとき家族旅行が嬉しかった②地理の授業が面白かった③旅Vlogばかり見てる④海外ボランティアに憧れた</div>
        <textarea id="q8" placeholder="好きなことにまつわる体験を書き出してみましょう..." style="min-height: 150px;"></textarea>
      </div>
    </div>

    <!-- Q9 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q9</span>この情熱で「誰の悩み」を解決したい？</div>
        <div class="question-hint">誰の人生に届けたい？どんな時に助けになれそう？</div>
        <div class="question-example">インスタでマネタイズできてない人</div>
        <textarea id="q9" placeholder="誰のどんな悩みを解決したいですか..."></textarea>
      </div>
    </div>

    <!-- Q10 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q10</span>この情熱を「仕事」にするなら、どんなカタチ？</div>
        <div class="question-hint">商品化・発信・ライフワーク化など、理想の未来を妄想してOK！</div>
        <div class="question-example">コーチング講座を開いて、自分軸で発信したい人、満足いくマネタイズがしたい人を救いたい</div>
        <textarea id="q10" placeholder="どんな形で仕事にしたいですか..."></textarea>
      </div>
    </div>

    <!-- Q11 -->
    <div class="section">
      <div class="question-card">
        <div class="question-text"><span class="question-number">Q11</span>あなたの情熱を一言で表すと？</div>
        <textarea id="q11" placeholder="例：「誰かの"夢中"を応援するのが好き」「人の変化に寄り添うのがたまらない」"></textarea>
      </div>

      <div style="background: var(--light-green); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-md);">
        <p style="font-size: 1.1rem; color: #2e7d32;"><strong>ワークお疲れ様でした！</strong></p>
        <p style="margin-top: var(--spacing-sm);">
          🔥あなたの情熱は、"心が震えた瞬間"の中にあります。<br>
          焦らず、思考よりも"行動"を重ねていくことで、その火は、きっと本物の炎になっていきます。<br>
          情熱は、あなたがあなたらしく輝ける場所を教えてくれます。<br>
          その火を信じて、あなただけの道を歩んでいこう🌱
        </p>
      </div>
    </div>
  </div>

  <nav class="nav-bottom">
    <a href="05-talent.html" class="btn btn-secondary">← 前へ</a>
    <a href="../index.html" class="btn btn-secondary" style="font-size:0.85rem;">目次</a>
    <button class="btn btn-save" onclick="saveData()">保存する</button>
    <a href="07-mission.html" class="btn btn-primary">次へ →</a>
  </nav>
  <div class="toast" id="toast"></div>

  <!-- Lark API連携 -->
  <script src="../js/lark-api.js"></script>
  <script src="../js/lark-config.js"></script>
  <script src="../js/data-sync.js"></script>

  <script>
    const passionQuestions = [
      "誰に頼まれなくても、自然とやってしまうことがある",
      "それについて話し出すと、つい熱く語ってしまう",
      "それをやっていると、時間を忘れて没頭できる",
      "お金や評価がなくても続けていたいと思える",
      "気づいたらそのジャンルについて調べている",
      "疲れていても、ついやってしまうことがある",
      "他の人が興味なさそうでも、なぜか気になる",
      "発信・表現せずにはいられない衝動がある",
      "「やらなきゃ」より「やりたくて仕方ない」が勝っている",
      "これを使って誰かの役に立てたら最高だと思う"
    ];

    let passionAnswers = Array(10).fill(null);

    function renderPassionChecklist() {
      const container = document.getElementById('passionChecklist');
      container.innerHTML = passionQuestions.map((q, i) => `
        <div class="passion-check-item" data-index="${i}">
          <div class="num">${i + 1}</div>
          <div style="flex: 1 1 calc(100% - 44px); font-size: 0.95rem; line-height: 1.6;">${q}</div>
          <select onchange="updateAnswer(${i}, this.value)">
            <option value="">選んでください</option>
            <option value="yes">YES</option>
            <option value="no">NO</option>
          </select>
        </div>
      `).join('');
    }

    function updateAnswer(index, value) {
      passionAnswers[index] = value;
      const item = document.querySelector(`[data-index="${index}"]`);
      item.classList.toggle('selected', value === 'yes');

      const yesCount = passionAnswers.filter(a => a === 'yes').length;
      document.getElementById('yesCount').textContent = yesCount;

      // 結果表示
      const resultEl = document.getElementById('diagnosisResult');
      const answeredCount = passionAnswers.filter(a => a !== null).length;

      if (answeredCount === 10) {
        resultEl.style.display = 'block';
        const titleEl = document.getElementById('resultTitle');
        const descEl = document.getElementById('resultDesc');

        if (yesCount >= 7) {
          resultEl.className = 'diagnosis-result passion';
          titleEl.textContent = '🔥 「情熱」の可能性が高い！';
          descEl.textContent = '行動や没頭から生まれた"本物の熱"があなたの中にあります！';
        } else if (yesCount >= 4) {
          resultEl.className = 'diagnosis-result seed';
          titleEl.textContent = '🌱 「興味のタネ」の段階';
          descEl.textContent = '行動しながら確かめていくと、情熱に育つ可能性大！';
        } else {
          resultEl.className = 'diagnosis-result admiration';
          titleEl.textContent = '💭 「憧れ」の可能性あり';
          descEl.textContent = 'まだ"やってみたい"のイメージが先行してるかも？焦らず、いろんな【興味】を見つけて本当の情熱に出会いましょう🔥';
        }
      } else {
        resultEl.style.display = 'none';
      }

      updateProgress();
    }

    function updateProgress() {
      const fields = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q8', 'q9', 'q10', 'q11'];
      let filled = 0;
      fields.forEach(id => {
        const el = document.getElementById(id);
        if (el && el.value.trim()) filled++;
      });
      const answeredChecks = passionAnswers.filter(a => a !== null).length;
      filled += answeredChecks > 0 ? 1 : 0;

      const progress = (filled / (fields.length + 1)) * 100;
      document.getElementById('progressBar').style.width = progress + '%';
    }

    function saveData() {
      const data = {
        q1: document.getElementById('q1').value,
        q2: document.getElementById('q2').value,
        q3: document.getElementById('q3').value,
        q4: document.getElementById('q4').value,
        q5: document.getElementById('q5').value,
        q6: document.getElementById('q6').value,
        q7: passionAnswers,
        q8: document.getElementById('q8').value,
        q9: document.getElementById('q9').value,
        q10: document.getElementById('q10').value,
        q11: document.getElementById('q11').value,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('selfUnderstanding_passion', JSON.stringify(data));
      showToast('保存しました！', 'success');
    }

    function loadData() {
      const saved = localStorage.getItem('selfUnderstanding_passion');
      if (saved) {
        const data = JSON.parse(saved);
        document.getElementById('q1').value = data.q1 || '';
        document.getElementById('q2').value = data.q2 || '';
        document.getElementById('q3').value = data.q3 || '';
        document.getElementById('q4').value = data.q4 || '';
        document.getElementById('q5').value = data.q5 || '';
        document.getElementById('q6').value = data.q6 || '';
        document.getElementById('q8').value = data.q8 || '';
        document.getElementById('q9').value = data.q9 || '';
        document.getElementById('q10').value = data.q10 || '';
        document.getElementById('q11').value = data.q11 || '';

        if (data.q7) {
          passionAnswers = data.q7;
          passionAnswers.forEach((answer, i) => {
            if (answer) {
              const select = document.querySelector(`[data-index="${i}"] select`);
              if (select) {
                select.value = answer;
                updateAnswer(i, answer);
              }
            }
          });
        }
        updateProgress();
      }
    }

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast ' + type + ' show';
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    document.querySelectorAll('textarea').forEach(el => {
      el.addEventListener('input', updateProgress);
    });

    document.addEventListener('DOMContentLoaded', () => {
      renderPassionChecklist();
      loadData();
    });
  </script>
</body>
</html>
